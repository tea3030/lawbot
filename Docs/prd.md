# 법령 Q&A 웹앱 PRD (Product Requirements Document)

## 1. 프로젝트 개요

### 1.1 프로젝트명
**LawBot** - 법령 기반 질의응답 웹 애플리케이션

### 1.2 프로젝트 목적
국가법령정보센터 API와 ChatGPT를 활용하여 사용자가 법령에 대한 질문을 하면 해당 법령 내에서 정확한 답변을 제공하는 데모 웹 애플리케이션 개발

### 1.3 프로젝트 배경
- 일반 사용자들이 복잡한 법령 정보에 쉽게 접근할 수 있는 도구 필요
- 국가법령정보센터의 풍부한 법령 데이터를 활용한 실용적 서비스 구현
- AI 기술을 활용한 법령 해석 및 안내 서비스의 가능성 검증

## 2. 제품 비전 및 목표

### 2.1 제품 비전
"누구나 쉽게 법령을 이해하고 활용할 수 있는 AI 기반 법령 도우미"

### 2.2 핵심 목표
- 법령 검색의 접근성 향상
- 복잡한 법령 용어의 쉬운 해석 제공
- 정확한 법령 근거 기반 답변 제공
- 사용자 친화적인 인터페이스 구현

## 3. 타겟 사용자

### 3.1 주요 사용자
- **공기업 인허가 담당자**: 지역개발, 에너지, 건설 관련 인허가 업무 담당자
- **공기업 법무팀**: 법령 해석 및 규제 검토 업무 담당자
- **공기업 정책기획팀**: 정책 수립 시 관련 법령 검토가 필요한 담당자
- **지방공기업 개발팀**: 지역별 개발사업 관련 법령 확인이 필요한 담당자

### 3.2 사용자 페르소나
**페르소나 1: 박인허 (35세, 공기업 개발사업팀 과장)**
- 태양광, 풍력 등 신재생에너지 개발사업 담당
- 지역별 인허가 절차와 관련 법령에 대한 빠른 확인 필요
- "OO시 OO구에서 태양광 발전소 건설 시 필요한 인허가는?" 같은 구체적 질문

**페르소나 2: 김법무 (40세, 공기업 법무팀 차장)**
- 회사 사업 관련 법령 검토 및 리스크 분석 담당
- 복잡한 법령 간 연관성 파악과 정확한 해석 필요
- 법령 변경사항이 기존 사업에 미치는 영향 분석 업무

## 4. 핵심 기능 요구사항

### 4.1 MVP (Minimum Viable Product) 기능
1. **인허가 절차 질의응답** (최우선)
   - 지역별 + 사업유형별 인허가 절차 질문 처리
   - 예: "인천 서구에서 태양광 개발 인허가 절차는?"
   - 관련 법령 자동 검색 및 단계별 절차 안내
   - 필요 서류, 소요기간, 담당기관 정보 제공

2. **인허가 관련 법령 검색** (높은 우선순위)
   - 건축법, 도시계획법, 전기사업법, 신재생에너지법 등 중심
   - 키워드 + 지역 조합 검색 (예: "태양광 + 인천")
   - 법령 간 연관성 표시
   - 최신 개정사항 하이라이트

3. **법령 본문 조회 및 해석** (높은 우선순위)
   - 인허가 관련 조문 중심 표시
   - 복잡한 법령 용어의 쉬운 해석 제공
   - ChatGPT 기반 조문별 상세 설명
   - 실무 적용 가이드 포함

4. **지역별 조례 연계** (중간 우선순위)
   - 중앙법령과 지방조례 연계 정보
   - 지역별 특별 규정 안내
   - 지자체별 인허가 담당부서 정보

### 4.2 향후 확장 기능
1. **업무별 템플릿 기능**
   - 사업유형별 인허가 체크리스트
   - 자주 묻는 질문(FAQ) 템플릿
   - 업무별 즐겨찾기 법령 그룹

2. **법령 모니터링 기능**
   - 관심 법령 변경사항 알림
   - 인허가 관련 신규 법령/조례 업데이트
   - 법령 개정이 기존 사업에 미치는 영향 분석

3. **협업 및 히스토리 기능**
   - 팀 내 질문/답변 공유
   - 과거 유사 사례 검색
   - 부서별 자주 사용하는 법령 통계

## 5. 기술 요구사항

### 5.1 기술 스택
**프론트엔드**
- React 18+ with TypeScript
- Tailwind CSS (UI 스타일링)
- Axios (API 통신)
- React Query (상태 관리)

**백엔드**
- FastAPI (Python 3.11+)
- Pydantic (데이터 검증)
- SQLite (로컬 개발용, 기본값)
- Firebase Firestore (배포용, 선택 가능)
- Repository 패턴 (데이터 접근 추상화)

**외부 API**
- 국가법령정보센터 API
- OpenAI ChatGPT API

### 5.2 시스템 아키텍처
```
[사용자] → [React Frontend] → [FastAPI Backend] → [법령 API / ChatGPT API]
                                      ↓
                    [SQLite (로컬) / Firebase Firestore (배포)]
```

**데이터베이스 전략:**
- **로컬 개발**: SQLite 사용 (간단한 설정, 빠른 개발)
- **배포**: Firebase Firestore 사용 예정 (확장성, 실시간 동기화)
- **전환 방식**: Repository 패턴으로 데이터 접근 추상화하여 최소한의 코드 변경으로 전환 가능
- **환경 변수**: `DB_TYPE=sqlite|firestore`로 선택

### 5.3 성능 요구사항
- API 응답 시간: 평균 3초 이내
- 동시 사용자: 10명 이상 지원
- 법령 검색 결과: 1초 이내 표시
- 캐싱을 통한 반복 검색 최적화

### 5.4 환경 구성 및 시간대 정책
- Docker를 사용하지 않고도 동일한 환경을 재현할 수 있도록, 가상환경 스크립트와 `.env` 로딩 절차를 문서화한다.
- 필수 환경 변수(OpenAI API 키, 법령 API 키, TIMEZONE, APP_ENV 등)는 `.env.example`과 README에 모두 명시하고, FastAPI가 기동될 때 누락 여부를 검사한다.
- 데이터베이스 타입은 `DB_TYPE` 환경 변수로 선택 가능하다. 로컬 개발 시 `sqlite`, 배포 시 `firestore`를 사용한다.
- Firebase 전환 시 `FIREBASE_PROJECT_ID`와 `FIREBASE_CREDENTIALS_PATH` 환경 변수를 설정한다.
- 서버 내부에서는 모든 날짜/시간을 UTC로 저장하고, 사용자 노출 시에만 KST 등 현지 시간으로 변환한다. 프론트엔드 역시 동일한 헬퍼를 사용해 형식을 맞춘다.
- `time_rules` 문서와 실제 구현 간 차이가 없도록 변경 시 동시 업데이트를 의무화한다.

## 6. 데이터 요구사항

### 6.1 인허가 관련 법령 데이터 (우선순위별)
**최우선 법령**
- 건축법 및 시행령, 시행규칙
- 도시계획법 및 관련 법령
- 전기사업법 및 시행령
- 신에너지 및 재생에너지 개발·이용·보급 촉진법
- 환경영향평가법 및 시행령
- 산지관리법 (산지 개발 관련)

**주요 법령**
- 국토의 계획 및 이용에 관한 법률
- 산업입지 및 개발에 관한 법률
- 농지법 (농지 전용 관련)
- 자연환경보전법
- 문화재보호법 (문화재 보호구역 관련)
- 개발제한구역의 지정 및 관리에 관한 특별조치법

**지역별 조례 데이터**
- 광역시·도별 도시계획 조례
- 시·군·구별 건축 조례
- 지역별 신재생에너지 관련 조례
- 환경보전 관련 지방조례

**관련 해석례 및 판례**
- 인허가 관련 행정심판례
- 법령해석례 (법제처)
- 주요 대법원 판례 (토지이용, 환경 관련)

### 6.2 사업별 인허가 정보
- 태양광 발전사업 인허가 절차 및 기준
- 풍력 발전사업 관련 규정
- 소수력 발전사업 절차
- 바이오매스 발전사업 규정
- 지열 발전사업 관련 법령

### 6.3 지역별 담당기관 정보
- 중앙부처별 담당 업무 (산업부, 환경부, 국토부 등)
- 광역시·도별 인허가 담당부서
- 시·군·구별 인허가 창구
- 유관기관 연락처 (한국에너지공단, 환경공단 등)

### 6.4 사용자 데이터
- 부서별 질문 히스토리
- 자주 사용하는 법령 즐겨찾기
- 사업유형별 검색 통계
- 법령 업데이트 알림 설정

## 7. 주요 사용 시나리오 및 업무별 활용 가이드

### 7.1 핵심 사용 시나리오
**시나리오 1: 지역별 태양광 개발 인허가 문의**
- 질문 예시: "인천 서구에서 태양광 발전소 건설 시 필요한 인허가 절차는?"
- 처리 과정:
  1. 지역(인천 서구) + 사업유형(태양광) 키워드 추출
  2. 관련 법령 검색: 전기사업법, 신재생에너지법, 건축법, 도시계획법
  3. 인천시 관련 조례 추가 검색
  4. ChatGPT 프롬프트 구성: 법령 + 지역정보 + 절차 질문
  5. 단계별 인허가 절차, 필요서류, 담당기관, 소요기간 제공

**시나리오 2: 법령 개정사항이 기존 사업에 미치는 영향 분석**
- 질문 예시: "신재생에너지법 개정으로 진행 중인 풍력사업에 어떤 영향이 있나?"
- 처리 과정:
  1. 신재생에너지법 최신 개정사항 검색
  2. 풍력사업 관련 조문 변경사항 추출
  3. 기존 인허가 절차와의 차이점 분석
  4. 추가 필요 절차나 서류 안내

**시나리오 3: 복합 법령 적용 상황 해석**
- 질문 예시: "농지에 태양광 설치 시 농지법과 전기사업법 중 어느 것이 우선 적용되나?"
- 처리 과정:
  1. 농지법, 전기사업법 관련 조문 검색
  2. 법령 간 우선순위 및 적용 기준 분석
  3. 실무 적용 가이드 및 주의사항 제공

### 7.2 업무별 활용 가이드
**인허가 담당자용**
- 사업유형별 인허가 체크리스트 제공
- 지역별 특별 규정 및 담당기관 정보
- 자주 묻는 질문(FAQ) 템플릿 활용
- 인허가 진행 단계별 필요 법령 안내

**법무팀용**
- 법령 간 충돌 상황 해석 가이드
- 최신 개정사항이 기존 계약/사업에 미치는 영향 분석
- 리스크 요소 식별 및 대응방안 제시
- 관련 판례 및 해석례 연계 정보

**정책기획팀용**
- 정책 수립 시 고려해야 할 관련 법령 체계 안내
- 중앙정부 정책과 지방정부 조례 간 연계성 분석
- 타 지역 유사 정책 사례 및 관련 법령 비교

### 7.3 질문 유형별 처리 방식
**절차 문의형**
- "~하려면 어떤 절차가 필요한가?" 형태
- 단계별 절차 + 필요서류 + 담당기관 + 소요기간 제공

**법령 해석형**
- "~조문의 의미는 무엇인가?" 형태
- 조문 원문 + 쉬운 해석 + 실무 적용 사례 제공

**비교 분석형**
- "A법과 B법 중 어느 것이 우선인가?" 형태
- 법령 간 관계 + 적용 우선순위 + 판례/해석례 제공

**영향 분석형**
- "법령 개정이 기존 사업에 어떤 영향을 주나?" 형태
- 변경사항 요약 + 기존 대비 차이점 + 대응방안 제공

## 8. UI/UX 요구사항

### 7.1 디자인 원칙
- **직관적**: 법령 전문가가 아니어도 쉽게 사용 가능
- **신뢰성**: 공식적이고 전문적인 느낌의 디자인
- **접근성**: 웹 접근성 가이드라인 준수
- **반응형**: 모바일, 태블릿, 데스크톱 지원

### 7.2 주요 화면
1. **메인 페이지**: 검색창 중심의 심플한 구성
2. **검색 결과 페이지**: 법령 목록과 미리보기
3. **법령 상세 페이지**: 법령 본문과 질의응답 기능
4. **질의응답 페이지**: 질문-답변 대화형 인터페이스
5. **환경 설정 가이드**: 필수 API 키와 시간대 정책을 빠르게 확인할 수 있는 도움말(문서 링크 또는 툴팁)

## 8. 보안 및 개인정보 요구사항

### 8.1 보안 요구사항
- HTTPS 통신 필수
- API 키 보안 관리
- 입력 데이터 검증 및 필터링
- SQL Injection 방지
- 환경 변수는 서버 측에서만 읽어오고, 클라이언트 번들에 노출되지 않도록 한다.
- 필수 키가 누락된 상태에서 서비스가 동작하지 않도록 건강검진(health check)에 포함한다.

### 8.2 개인정보 보호
- 사용자 질문 내용 최소 보관
- 개인식별정보 수집 최소화
- 쿠키 사용 동의 절차

## 9. 개발 일정

### 9.1 Phase 1: MVP 개발 (4주)
- Week 1: 프로젝트 설정 및 API 연동
- Week 2: 백엔드 API 개발
- Week 3: 프론트엔드 UI 개발
- Week 4: 통합 테스트, 시간대/환경 변수 검증, 배포

### 9.2 Phase 2: 기능 확장 (추후)
- 고급 검색 기능
- 사용자 기능
- 성능 최적화

## 10. 성공 지표 (KPI)

### 10.1 사용성 지표
- 일 평균 질문 수: 50건 이상
- 사용자 만족도: 4.0/5.0 이상
- 평균 세션 시간: 5분 이상

### 10.2 기술적 지표
- 시스템 가용성: 99% 이상
- 평균 응답 시간: 3초 이내
- 오류율: 1% 미만

## 11. 리스크 및 제약사항

### 11.1 기술적 리스크
- 국가법령정보센터 API 서비스 중단 위험
- ChatGPT API 비용 및 사용량 제한
- 법령 데이터 파싱 복잡성

### 11.2 비즈니스 리스크
- 법령 해석의 정확성 보장 어려움
- 법적 책임 문제
- 사용자 기대치 관리

### 11.3 제약사항
- 국가법령정보센터 API 사용 신청 필요
- OpenAI API 사용료 발생
- 법령 정보의 실시간 업데이트 한계

---

## 개발 진행 관련 의견 요청 사항

### 1. 기술 스택 관련
**질문**: 현재 제안한 기술 스택(React + TypeScript, FastAPI)에 대해 어떻게 생각하시나요? 
- 다른 선호하는 프레임워크가 있으신가요?
- 데이터베이스는 SQLite로 시작해서 PostgreSQL로 확장하는 것이 적절할까요?
- 친구가 불편을 호소해서, 개인적으로 사용할 수 있게 만들어 주는 것이므로, 최대한 심플하고 사용하기 쉽게 만들어 주세요.

### 2. 법령 검색 방식
**질문**: 사용자 질문에서 관련 법령을 찾는 방식에 대한 의견을 주세요.
- 키워드 매칭 vs 의미 기반 검색 중 어느 것을 우선할까요?
- 법령 분야별 카테고리 분류가 필요할까요? (민법, 상법, 행정법 등)
- 법령 검색 결과를 정렬하는 방식에 대한 의견을 주세요.

### 3. ChatGPT 연동 방식
**질문**: ChatGPT와의 연동 방식에 대한 선호도를 알려주세요.
- 법령 전문을 모두 프롬프트에 포함 vs 요약된 내용만 포함
- 답변 길이 제한이나 형식에 대한 가이드라인이 필요할까요?
- 답변 길이 제한은 없고, ChatGPT의 답변을 그대로 사용할 예정입니다. 모델은 GPT 4o를 사용할 예정입니다. API 키는 지금 제공하는 것이 좋을까요?

### 4. 사용자 인터페이스
**질문**: UI/UX 방향성에 대한 의견을 주세요.
- 채팅형 인터페이스 vs 검색 결과 페이지 형태 중 선호하는 방식
- 법령 본문 표시 방식 (전체 vs 관련 조문만)
- 인터페이스는 ChatGPT와 유사하게 만들 예정입니다. 챗봇형식이므로 대화창을 제공하는 것이 좋을 것 같습니다. 의견 있다면 알려주세요.

### 5. 데모 범위
**질문**: 데모 버전의 범위를 어느 정도로 설정할까요?
- 특정 법령 분야로 제한 (예: 근로기준법, 민법 등)
- 전체 법령 대상으로 구현
- 질문 유형 제한 (예: 단순 조회만 vs 해석 질문 포함)
- 법에 관련된 것이기 때문에 정확도가 생명입니다. 따라서 질문 유형 제한은 없고, 모든 질문에 대해 답변을 제공할 예정입니다.

### 6. 배포 및 운영
**질문**: 배포 방식에 대한 선호도를 알려주세요.
- 로컬 개발 환경에서만 테스트
- 클라우드 배포 (Vercel, Netlify 등)
- 도커 컨테이너화 필요 여부
- 로컬은 아니고 개인적으로 사용하게 해주려면 도메인을 받는게 좋을까요? 의견주십시오. 

위 질문들에 대한 의견을 주시면 더 구체적이고 맞춤화된 개발 계획을 수립하겠습니다.

---

## 확정된 개발 방향 및 계획

### 개발 방향 확정

#### 1. 기술 스택 확정
- **프론트엔드**: React + TypeScript (Vite 사용으로 빠른 개발)
- **백엔드**: FastAPI + SQLite (로컬 개발) / Firebase Firestore (배포 예정)
- **AI 연동**: OpenAI GPT-4o API
- **배포**: Vercel (프론트엔드) + Firebase (백엔드) + 개인 도메인 연결 (추천)

#### 2. 핵심 설계 원칙
- **심플함**: 최대한 단순하고 사용하기 쉬운 인터페이스
- **정확성**: 법령 해석의 정확도를 최우선으로 고려
- **접근성**: 친구가 언제든 쉽게 접근할 수 있는 개인 도메인 제공
- **신뢰성**: 법령 출처 명시 및 면책 문구 포함

#### 3. UI/UX 방향
- **챗봇형 대화 인터페이스**: ChatGPT와 유사한 대화창 형태
- **대화 히스토리 저장**: 이전 질문/답변 기록 유지
- **법령 출처 표시**: 답변 하단에 참고 법령 및 조문 링크 제공
- **모바일 최적화**: 휴대폰에서도 편리한 사용 가능

#### 4. 기능 범위
- **질문 유형**: 제한 없음 (모든 법령 관련 질문 처리)
- **답변 길이**: 제한 없음 (GPT-4o의 완전한 답변 활용)
- **검색 방식**: 키워드 매칭 + 의미 기반 검색 조합
- **정렬 방식**: 관련도 순 + 최신 개정일 순

### 구체적인 개발 계획

#### Phase 1: 기본 구조 개발 (1주)
**목표**: 프로젝트 기반 설정 및 기본 UI 구현

1. **프로젝트 초기 설정**
   - React + TypeScript + Vite 프로젝트 생성
   - FastAPI + SQLite 백엔드 설정 (로컬 개발용)
   - Repository 패턴으로 데이터 접근 추상화 (Firebase 전환 대비)
   - Pydantic 스키마 정의 (Firestore 호환)
   - 기본 프로젝트 구조 및 폴더 구성

2. **챗봇 UI 컴포넌트 구현**
   - ChatGPT 스타일의 대화창 인터페이스
   - 메시지 입력/전송 기능
   - 대화 히스토리 표시
   - 반응형 디자인 (모바일 최적화)

3. **목업 데이터 준비**
   - 인허가 관련 주요 법령 샘플 데이터 생성
   - 건축법, 신재생에너지법, 도시계획법 등 핵심 법령
   - 실제 API 구조와 동일한 데이터 형식

#### Phase 2: 핵심 기능 개발 (1-2주)
**목표**: 검색 및 질의응답 기능 완성

1. **법령 검색 기능**
   - 키워드 기반 법령 검색 엔진
   - 관련도 및 최신성 기반 결과 정렬
   - 법령 카테고리별 분류 (건설/건축, 에너지, 환경 등)

2. **ChatGPT API 연동**
   - GPT-4o API 통합
   - 법령 데이터 기반 프롬프트 엔지니어링
   - 정확한 법령 해석을 위한 컨텍스트 구성

3. **질의응답 시스템**
   - 사용자 질문 → 관련 법령 검색 → GPT 답변 생성 플로우
   - 법령 출처 및 조문 인용 기능
   - 면책 문구 자동 추가

4. **대화 관리 기능**
   - 대화 세션 저장/불러오기
   - 새 대화 시작 기능
   - 답변 복사하기 기능

#### Phase 3: 배포 및 최적화 (1주)
**목표**: 실제 서비스 배포 및 성능 최적화

1. **도메인 설정 및 배포**
   - 개인 도메인 구매 및 설정 (예: lawbot.your-domain.com)
   - Vercel을 통한 프론트엔드 배포
   - Firebase Firestore로 데이터베이스 전환 (`DB_TYPE=firestore`)
   - Firebase Cloud Functions 또는 별도 서버로 백엔드 배포

2. **실제 API 연동** (법령정보센터 API 승인 후)
   - 목업 데이터를 실제 법령 API로 교체
   - 실제 법령 데이터로 검색 및 답변 테스트
   - 데이터 동기화 및 업데이트 자동화

3. **성능 최적화 및 안정화**
   - API 응답 시간 최적화
   - 에러 처리 및 예외 상황 대응
   - 사용자 피드백 반영 및 버그 수정

### 추가 기능 제안

#### 즉시 구현 가능한 기능
1. **간단한 도메인명**: 기억하기 쉬운 URL 설정
2. **모바일 최적화**: 반응형 디자인으로 모든 기기 지원
3. **즐겨찾기 기능**: 자주 묻는 질문이나 중요한 법령 저장
4. **복사하기 버튼**: 답변을 쉽게 복사할 수 있는 기능

#### 향후 확장 가능한 기능
1. **대화 내보내기**: 중요한 대화를 PDF나 텍스트로 저장
2. **법령 북마크**: 자주 참조하는 법령을 빠르게 접근
3. **검색 히스토리**: 이전 검색 기록을 통한 빠른 재검색
4. **알림 기능**: 관심 법령의 개정 사항 알림

### API 키 관리 방안

**개발 단계**:
- 개발자가 테스트용 API 키 사용
- 환경변수를 통한 안전한 키 관리

**배포 단계**:
- 사용자 제공 API 키를 환경변수로 설정
- 키 노출 방지를 위한 서버사이드 처리
- 사용량 모니터링 및 비용 관리 기능

### 정확도 보장 방안

1. **법령 출처 명시**: 모든 답변에 참고한 법령 및 조문 표시
2. **면책 문구**: "이 답변은 참고용이며, 정확한 법적 판단은 전문가와 상담하세요"
3. **법령 업데이트 정보**: 데이터 최종 업데이트 날짜 표시
4. **답변 검증**: 중요한 답변의 경우 복수 법령 교차 검증

이제 개발을 시작할 준비가 완료되었습니다. 어떤 단계부터 시작하시겠습니까?
